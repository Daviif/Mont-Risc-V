#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

#include "tabela_instrucoes.h"

Instrucao tabela[MAX_INSTRU] = {
    {"add",  R_TYPE, "0110011", "000", "0000000", ""},
    {"sub",  R_TYPE, "0110011", "000", "0100000", ""},
    {"sll",  R_TYPE, "0110011", "001", "0000000", ""},
    {"xor",  R_TYPE, "0110011", "100", "0000000", ""},
    {"srl",  R_TYPE, "0110011", "101", "0000000", ""},
    {"sra",  R_TYPE, "0110011", "101", "0100000", ""},
    {"or",   R_TYPE, "0110011", "110", "0000000", ""},
    {"and",  R_TYPE, "0110011", "111", "0000000", ""},
    {"lr.d",  R_TYPE, "0110011", "011", "0001000", ""},
    {"sc.d",  R_TYPE, "0110011", "111", "0001100", ""},
    {"sb",  S_TYPE, "0100011", "000", "", ""},
    {"sh",  S_TYPE, "0100011", "001", "", ""},
    {"sw",  S_TYPE, "0100011", "010", "", ""},
    {"sd",  S_TYPE, "0100011", "111", "", ""},
    {"beq",  B_TYPE, "1100011", "000", "", ""},
    {"bne",  B_TYPE, "1100011", "010", "", ""},
    {"blt",  B_TYPE, "1100011", "100", "", ""},
    {"bge",  B_TYPE, "1100011", "101", "", ""},
    {"bltu",  B_TYPE, "1100011", "110", "", ""},
    {"bgeu",  B_TYPE, "1100011", "111", "", ""},
    {"lui",  U_TYPE, "0110111", "", "", ""},
    {"jal",  UJ_TYPE, "1101111", "", "", ""},
    {"lb",  I_TYPE, "0000011", "000", "", ""},
    {"lh",  I_TYPE, "0000011", "001", "", ""},
    {"lw",  I_TYPE, "0000011", "010", "", ""},
    {"ld",  I_TYPE, "0000011", "011", "", ""},
    {"lbu",  I_TYPE, "0000011", "100", "", ""},
    {"lhu",  I_TYPE, "0000011", "101", "", ""},
    {"lwu",  I_TYPE, "0000011", "110", "", ""},
    {"addi",  I_TYPE, "0010011", "000", "", ""},
    {"slli",  I_TYPE, "0010011", "001", "000000", ""},
    {"xori",  I_TYPE, "0010011", "100", "", ""},
    {"srli",  I_TYPE, "0010011", "101", "000000", ""},
    {"srai",  I_TYPE, "0010011", "101", "010000", ""},
    {"ori",  I_TYPE, "0010011", "110", "", ""},
    {"andi",  I_TYPE, "0010011", "111", "", ""},
    {"jalr",  I_TYPE, "1100111", "000", "", ""},
    {"ecall",  SYS_TYPE, "1110011", "000", "", "000000000000"},
    {"ebreak",  SYS_TYPE, "1110011", "000", "", "000000000001"},
    {"fence", SYS_TYPE, "0001111", "000", "", "000011111111"}
};

Instrucao *buscar_instrucao(char *nome){
    for(int i = 0; i < MAX_INSTRU; i++){
        if(strcmp(nome, tabela[i].nome) == 0){
            return &tabela[i];
        }
    }
    return NULL;
}